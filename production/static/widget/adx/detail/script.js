"use strict";$(function(){$("#sub-nav").html('<li class="active"><a href="javascript:;">Adx管理</a></li>\n        <li><a href="?goto=adx&mold=report">Adx报表</a></li>').show();var o=$("#form-container .confirm");$("#form-container").on("submit",function(){var n=o.btnSubmiting("正在提交..."),r=_.extend($("form").serializeJSON(),{id:t});if(r.forUser)try{r.forUser=JSON.parse(r.forUser)}catch(o){$("#forUser").val(""),console.warn("parse forUser error! ",r.forUser)}else r.forUser=[];return e(r).then(function(o){n(),0==o.status?(common.msgs.new_msg("success","success"),a()):common.msgs.new_msg("fail","fail")}),!1}),$("#form-container .cancel").on("click",function(){a()});function n(c){var s=$("#form-container");Object.keys(c).forEach(function(o){var n,r,t,a=c[o],e=s.find("[name="+o+"]");r=a,"text"!=(t=(n=e).attr("type"))&&"email"!=t&&"number"!=t||n.val(r),"checkbox"!=t&&"radio"!=t||n.each(function(){$(this).val()==r?$(this).prop("checked",!0):$(this).removeProp("checked")})})}var t=common.getUrlVars("adxId"),a=function(){return location.href="./index.html?"+$.param({goto:"adx",mold:"list"})},e=function(o){return common.ajaxPost("updateAdExchange",o)};common.pluginsTools.loadPlugins(function(){var o;o=t,common.ajaxGet("queryAdExchange",{id:o}).then(function(o){0==o.status&&o.data&&o.data.list&&o.data.list.length&&n(o.data.list[0])})},[])});