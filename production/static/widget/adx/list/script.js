"use strict";function defaultResultMapper(e){return _.defaults(e,{id:"",token:"",name:"",chargeType:"",priceType:"",adxUsageType:"",type:"",forUser:"",isSupportHtml:"",isSupportVideo:"",status:"",approveClass:""})}$(function(){$("#sub-nav").html('\n        <li><a href="?goto=adx&mold=report">Adx报表</a></li>\n        <li class="active"><a href="javascript:;">Adx管理</a></li>\n        ').show();$("#userInfomation").attr("roleId");common.pluginsTools.loadPlugins(function(){template.helper("status",function(e){switch(e){case 1:return'<span class="text-success"><i class="glyphicon glyphicon-play" /></span>';case 2:return'<span class="text-muted"><i class="glyphicon glyphicon-pause" /></span>';case 3:return'<span class="text-danger"><i class="glyphicon glyphicon-stop" /></span>';default:return""}}),template.helper("chargeType",function(e){return{1:"nurl",2:"adm"}[e]}),template.helper("priceType",function(e){return{1:"第一出价",2:"第二出价"}[e]}),template.helper("adxUsageType",function(e){return{1:"普通",2:"租用"}[e]}),template.helper("type",function(e){return{1:"Normal",2:"Prime",3:"Pop",4:"Adult",5:"Pop Prime"}[e]}),template.helper("tureOrFalse",function(e){return 1==e?'<span class="label label-success" title="Ignore alter"><i class="glyphicon glyphicon-ok" /></span>':'<span class="label label-ignore" title="Ignore alter"><i class="glyphicon glyphicon-ok" /></span>'}),template.helper("status",function(e){return 1==e?'<span class="label label-success" title="Ignore alter"><i class="glyphicon glyphicon-play" /></span>':'<span class="label label-ignore" title="Ignore alter"><i class="glyphicon glyphicon-stop" /></span>'}),function(){$("#list").on("click","button.detail",function(e){var t=$(this).attr("adxId"),a=$.param({goto:"adx",mold:"detail",adxId:t});location.href="./index.html?"+a,e.stopPropagation()}),$("#list").on("click","button.delete",function(e){var t=$(this).attr("adxId");s(t).then(function(e){0==e.status?common.msgs.new_msg("success","Delete success"):common.msgs.new_msg("fail","Delete failed")}),e.stopPropagation()}),a.on("click",function(){$(".extend-param").toggleClass("hidden")}),$("#inputSuccess4").on("keydown",function(e){var t=e.keyCode||e.which;"13"==t?(e.preventDefault(),o()):"27"==t&&($("#inputSuccess4").val(""),o())});var n=e.find("input[type=text]"),l=e.find("input[type=radio]");n.on("input",function(){var e=$(this);n.each(function(){var t=$(this);e.is(t)||t.val("")})}),t.on("click",function(e){e.preventDefault(),e.stopPropagation(),n.val(""),l.removeProp("checked"),o()}),e.on("submit",function(){return o(i()),!1})}(),o()},["template","datetimepicker"]),common.pluginsTools.loadCss("datetimepickerCss");var e=$("#form-container"),t=($("#submit"),$("#reset")),a=$("#more-param"),n=common.PageRender($(".page"),o),s=function(e){return common.ajaxGet("deleteAdExchange",{id:e})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $("#list").html(template("materialsList",Object.assign({loading:!1,data:null},e)))};function i(){return e.serializeJSON()}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_.extend({},i(),e);for(var a in _.defaults(t,{currentPage:1,limit:50}),t)void 0!==t[a]&&""!==t[a]||delete t[a];o.require&&o.require.abort&&o.require.abort(),l({loading:!0}),(o.require=common.ajaxGet("queryAdExchange",t)).then(function(e){if(0==e.status){var t=e.data&&0==e.data.list.length?[]:e.data.list.map(defaultResultMapper);l({data:t}),n(e.data.paging)}e.status&&(l(),n())})}});