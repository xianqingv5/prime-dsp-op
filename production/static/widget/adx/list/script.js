"use strict";function defaultResultMapper(e){return _.defaults(e,{id:"",token:"",name:"",chargeType:"",priceType:"",adxUsageType:"",type:"",forUser:"",isSupportHtml:"",isSupportVideo:"",status:"",approveClass:""})}$(function(){$("#sub-nav").html('\n        <li><a href="?goto=adx&mold=report">Adx报表</a></li>\n        <li class="active"><a href="javascript:;">Adx管理</a></li>\n        ').show();$("#userInfomation").attr("roleId");common.pluginsTools.loadPlugins(function(){template.helper("status",function(e){switch(e){case 1:return'<span class="text-success"><i class="glyphicon glyphicon-play" /></span>';case 2:return'<span class="text-muted"><i class="glyphicon glyphicon-pause" /></span>';case 3:return'<span class="text-danger"><i class="glyphicon glyphicon-stop" /></span>';default:return""}}),template.helper("chargeType",function(e){return{1:"nurl",2:"adm"}[e]}),template.helper("priceType",function(e){return{1:"第一出价",2:"第二出价"}[e]}),template.helper("adxUsageType",function(e){return{1:"普通",2:"租用"}[e]}),template.helper("type",function(e){return{1:"Normal",2:"Prime",3:"Pop",4:"Adult",5:"Pop Prime"}[e]}),template.helper("tureOrFalse",function(e){return 1==e?'<span class="label label-success" title="Ignore alter"><i class="glyphicon glyphicon-ok" /></span>':'<span class="label label-ignore" title="Ignore alter"><i class="glyphicon glyphicon-ok" /></span>'}),template.helper("status",function(e){return 1==e?'<span class="label label-success" title="Ignore alter"><i class="glyphicon glyphicon-play" /></span>':'<span class="label label-ignore" title="Ignore alter"><i class="glyphicon glyphicon-stop" /></span>'}),function(){$("#list").on("click","button.detail",function(e){var t=$(this).attr("adxId"),a=$.param({goto:"adx",mold:"detail",adxId:t});location.href="./index.html?"+a,e.stopPropagation()}),$("#list").on("click","button.delete",function(e){var t=$(this).attr("adxId");i(t).then(function(e){0==e.status?common.msgs.new_msg("success","Delete success"):common.msgs.new_msg("fail","Delete failed")}),e.stopPropagation()}),s.on("click",function(){$(".extend-param").toggleClass("hidden")}),$("#inputSuccess4").on("keydown",function(e){var t=e.keyCode||e.which;"13"==t?(e.preventDefault(),c()):"27"==t&&($("#inputSuccess4").val(""),c())});var a=e.find("input[type=text]"),t=e.find("input[type=radio]");a.on("input",function(){var t=$(this);a.each(function(){var e=$(this);t.is(e)||e.val("")})}),n.on("click",function(e){e.preventDefault(),e.stopPropagation(),a.val(""),t.removeProp("checked"),c()}),e.on("submit",function(){return c(r()),!1})}(),c()},["template","datetimepicker"]),common.pluginsTools.loadCss("datetimepickerCss");var e=$("#form-container"),n=($("#submit"),$("#reset")),s=$("#more-param"),l=common.PageRender($(".page"),c),i=function(e){return common.ajaxGet("deleteAdExchange",{id:e})},o=function(e){var t=0<arguments.length&&void 0!==e?e:{};return $("#list").html(template("materialsList",Object.assign({loading:!1,data:null},t)))};function r(){return e.serializeJSON()}function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=_.extend({},r(),e);for(var a in _.defaults(t,{currentPage:1,limit:50}),t)void 0!==t[a]&&""!==t[a]||delete t[a];c.require&&c.require.abort&&c.require.abort(),o({loading:!0}),c.require=common.ajaxGet("queryAdExchange",t),c.require.then(function(e){var t;0==e.status&&(t=e.data&&0==e.data.list.length?[]:e.data.list.map(defaultResultMapper),o({data:t}),l(e.data.paging)),e.status&&(o(),l())})}});