"use strict";var plugin1="template",plugin2="datetimepicker";function bindEvents(){$("#manualCharge, #manualRefund").unbind().on("click",function(){var e=$(this).attr("id");window.location="./index.html?goto=finance&mold="+e}),$("#chargeCheck, #refundCheck").unbind().on("click",function(){var e=$(this).attr("id");window.location="./index.html?goto=finance&mold="+e}),$("#finance-list").on("click","button.detail",function(e){e.stopPropagation();var t=$(this).attr("chargeId"),a=$(this).attr("type");window.location="./index.html?goto=finance&mold="+a+"&chargeId="+t}),$("#finance-list").on("click","button.attach-img",function(e){e.stopPropagation();var t=$(this).attr("imgLink");$("#imgModal").modal({backdrop:"static",keyboard:!1}),$("#imgModal").find("img").attr("src",t)}),$("#search").unbind().on("click",function(e){e.preventDefault(),getAndRenderList()})}function filterEvents(){var e=$("#show-all"),t=$("#chargeType"),a=$(".filter").focus();a.on("keyup",function(e){var t;"13"==(e.charCode||e.keyCode)&&(t=$(this).attr("data-key"),a.each(function(){t!=$(this).attr("data-key")&&$(this).val("")}),getAndRenderList())}),e.on("click",function(){a.val(""),t.val(""),getAndRenderList()}),t.on("change",function(){getAndRenderList()})}function getAndRenderList(a,n,r){var e=a||1,c=$("form").serialize()+"&currentPage="+e,i=$("#userInfomation").attr("roleId");helper(),common.ajaxRequest("queryAccountChargeHistory",c,function(e){var t;0==e.status&&(t=e.data&&0==e.data.list.length?'<tr><td  class="text-left" colspan="11">No result</td></tr>':template("financeList",{data:e.data&&e.data.list,roleId:i}),common.buildPage($(".page"),e.data.paging,c,getAndRenderList,10,a,n,r),$("#list").html(t))})}function helper(){template.helper("handleStatus",function(e){switch(e){case 0:return"未知";case 1:return"审核中";case 2:return"审核通过";case 3:return"审核未通过";default:return""}}),template.helper("handleType",function(e){switch(e){case 0:return"未知";case 1:return"paypal充值";case 2:return"paypal充值手续费";case 3:return"银行电汇充值";case 4:return"银行电汇充值手续费";case 5:return"信用卡充值";case 6:return"信用卡充值手续费";case 7:return"paypal退款";case 8:return"paypal退款手续费";case 9:return"银行电汇退款";case 10:return"银行电汇退款手续费";case 11:return"平账";case 13:return"退款";case 15:return"测试费用";case 16:return"测试费用手续费";case 17:return"bonus";case 18:return"bonus手续费";case 19:return"押金";case 20:return"押金手续费";case 21:return"后付款";case 22:return"后付款手续费";default:return""}}),template.helper("handleAmount",function(e){switch(e){case 0:return"未知";case 1:return"income";case 2:return"payout";case 3:return"income";case 4:return"payout";case 5:return"income";case 6:case 7:case 8:case 9:case 10:return"payout";case 11:return"income";case 13:return"payout";default:return""}}),template.helper("checkType",function(e){switch(e){case 0:return"";case 1:case 2:case 3:case 4:case 5:case 6:return"chargeCheck";case 7:case 8:case 9:case 10:return"refundCheck";case 11:return"chargeCheck";case 13:return"refundCheck";case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:return"chargeCheck";default:return""}})}function init(){$(".form_datetime, .form_date").datetimepicker({todayHighlight:1,pickerPosition:"bottom"}),getAndRenderList(),bindEvents(),filterEvents()}common.pluginsTools.loadCss("datetimepickerCss"),common.pluginsTools.loadPlugins(init,[plugin1,plugin2]);