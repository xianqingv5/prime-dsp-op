"use strict";var plugin1="template",plugin2="datetimepicker",approverId=$("#userInfomation").attr("approverId");function bindEvents(){$("button").unbind().on("click",function(){var t=$(this).attr("adId"),e=$(this).attr("unapprovedAdIds");localStorage.setItem("unapprovedAdIds",e),window.location="./index.html?goto=creative&mold=detail",localStorage.setItem("adId",t)}),$("#search").unbind().on("click",function(t){var e=$("form").serialize()+"&approverId="+approverId;t.preventDefault(),getAndRenderList(1,"","",e)})}function queryApproverList(){var t="";if(2==$("#userInfomation").attr("roleId"))common.ajaxRequest("queryApproverList",t,function(t){if(0==t.status){for(var e=$("#approverId").html(),a=0,r=t.data.list.length;a<r;a++)e+='<option value="'+t.data.list[a].approverId+'">'+t.data.list[a].approverName+"</option>";$("#approverId").html(e)}getAndRenderList()});else{var e,a=$("#userInfomation").text().split("@")[0],r=$("form").serializeArray();$.each(r,function(t,a){if("approvalStatus"==a.name)return e=a.value,!1}),t=t+"&approverId="+approverId+"&approvalStatus="+e;var n='<option value="'+approverId+'">'+a+"</option>";$("#approverId").html(n),$("#approverId").val(approverId).attr("disabled",!0),getAndRenderList(1,"","",t)}}function getAndRenderList(t,e,a,r){r=r||$("form").serialize();var n=$("#searchChoice").val(),o=$("#inputSuccess4").val();r=r+"&"+n+"="+o+"&currentPage="+(t||1);helper(),common.ajaxRequest("queryCreativeList",r,function(n){var o=void 0;0==n.status&&(o=n.data&&0==n.data.list.length?'<tr><td  class="text-left" colspan="10">No result</td></tr>':template("materialsList",{data:n.data.list}),$("#list").html(o),common.buildPage($(".page"),n.data.paging,r,getAndRenderList,10,t,e,a),bindEvents())})}function helper(){template.helper("handleStatus",function(t){switch(t){case 1:return"审核中";case 2:return"审核通过";case 3:return"审核未通过";case 4:return"审核通过(部分)";default:return""}}),template.helper("handleAdType",function(t){switch(t){case 1:return"横幅";case 2:return"原生";case 3:return"视频";case 4:default:return""}}),template.helper("countUnapprovedAdIds",function(t,e,a){return 2!=e&&a.push(t),a.join(",")})}function init(){console.log("init"),$(".form_datetime, .form_date").datetimepicker({todayHighlight:1,pickerPosition:"bottom"}),queryApproverList()}common.pluginsTools.loadPlugins(init,[plugin1,plugin2]),common.pluginsTools.loadCss("datetimepickerCss");