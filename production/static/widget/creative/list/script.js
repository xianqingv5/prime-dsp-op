"use strict";var plugin1="template",plugin2="datetimepicker",approverId=$("#userInfomation").attr("approverId");function bindEvents(){$("button").unbind().on("click",function(){var t=$(this).attr("adId"),e=$(this).attr("unapprovedAdIds");localStorage.setItem("unapprovedAdIds",e),window.location="./index.html?goto=creative&mold=detail",localStorage.setItem("adId",t)}),$("#search").unbind().on("click",function(t){var e=$("form").serialize()+"&approverId="+approverId;t.preventDefault(),getAndRenderList(1,"","",e)})}function queryApproverList(){var t,e,a,r,n="";2==$("#userInfomation").attr("roleId")?common.ajaxRequest("queryApproverList",n,function(t){if(0==t.status){for(var e=$("#approverId").html(),a=0,r=t.data.list.length;a<r;a++)e+='<option value="'+t.data.list[a].approverId+'">'+t.data.list[a].approverName+"</option>";$("#approverId").html(e)}getAndRenderList()}):(t=$("#userInfomation").text().split("@")[0],e=$("form").serializeArray(),$.each(e,function(t,e){if("approvalStatus"==e.name)return a=e.value,!1}),n=n+"&approverId="+approverId+"&approvalStatus="+a,r='<option value="'+approverId+'">'+t+"</option>",$("#approverId").html(r),$("#approverId").val(approverId).attr("disabled",!0),getAndRenderList(1,"","",n))}function getAndRenderList(a,r,n,o){var o=o||$("form").serialize(),t=$("#searchChoice").val(),e=$("#inputSuccess4").val(),o=o+"&"+t+"="+e+"&currentPage="+(a||1);helper(),common.ajaxRequest("queryCreativeList",o,function(t){var e=void 0;0==t.status&&(e=t.data&&0==t.data.list.length?'<tr><td  class="text-left" colspan="10">No result</td></tr>':template("materialsList",{data:t.data.list}),$("#list").html(e),common.buildPage($(".page"),t.data.paging,o,getAndRenderList,10,a,r,n),bindEvents())})}function helper(){template.helper("handleStatus",function(t){switch(t){case 1:return"审核中";case 2:return"审核通过";case 3:return"审核未通过";case 4:return"审核通过(部分)";default:return""}}),template.helper("handleAdType",function(t){switch(t){case 1:return"横幅";case 2:return"原生";case 3:return"视频";case 4:default:return""}}),template.helper("countUnapprovedAdIds",function(t,e,a){return 2!=e&&a.push(t),a.join(",")})}function init(){console.log("init"),$(".form_datetime, .form_date").datetimepicker({todayHighlight:1,pickerPosition:"bottom"}),queryApproverList()}common.pluginsTools.loadPlugins(init,[plugin1,plugin2]),common.pluginsTools.loadCss("datetimepickerCss");